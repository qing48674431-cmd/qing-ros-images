# v7.21.3 一键拉取命令说明

以下命令用于**从本仓库拉取并执行** RouterOS CHR v7.21.3 一键安装脚本，无需先手动下载脚本文件。

---

## 一、一键拉取并执行（从 GitHub 下载镜像）

在 **root** 或 **sudo** 环境下，复制整行执行即可：

```bash
curl -sL https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh | bash
```

或使用 wget：

```bash
wget -qO- https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh | bash
```

**说明**：

- 脚本会从本仓库 [Releases v7.21.3](https://github.com/qing48674431-cmd/qing-ros-images/releases/tag/v7.21.3) 下载镜像（按 UEFI/BIOS 自动选 chr-7.21.3.img 或 chr-7.21.3-legacy-bios.img）。
- 自动注入：当前 IP/网关、admin 密码（默认 `Admin112233`）、SSH/Winbox 开启、device-mode container=yes。
- 写入**第一块物理硬盘**后重启，请确认目标盘无误。

---

## 二、自定义密码再执行

先拉取脚本到本地，改密码后再执行（推荐）：

```bash
curl -sL -o install-ros-v7.21.3.sh "https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh"
chmod +x install-ros-v7.21.3.sh
# 编辑脚本，修改 ROS_PASSWORD="你的密码"
./install-ros-v7.21.3.sh
```

或不改文件，用环境变量传密码：

```bash
ROS_PASSWORD="你的密码" bash -c 'curl -sL https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh | bash'
```

---

## 三、使用本地已解压的镜像（跳过下载）

若已在本机准备好 chr-7.21.3.img 或 chr-7.21.3-legacy-bios.img，可传路径，脚本只做注入与写盘：

```bash
curl -sL https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh | bash -s /path/to/chr-7.21.3.img
```

将 `/path/to/chr-7.21.3.img` 换成你本地镜像的实际路径。

---

## 四、注意事项

| 项 | 说明 |
|----|------|
| **权限** | 需 root 或 sudo，且能访问 GitHub（raw、releases）。 |
| **目标盘** | 脚本写入 `lsblk` 识别的第一块物理硬盘，执行前请确认无误。 |
| **Container** | 脚本已注入 device-mode container=yes；若需 WinBox 里出现 Container，首次启动后 **5 分钟内**做一次**冷关机再开机**（控制面板/宿主机断电再开）。 |
| **脚本名中的空格** | 仓库中脚本文件名为 `v7.21.3 install-ros-onekey.sh`，URL 中空格已编码为 `%20`。 |

---

## 五、命令速查

| 用途 | 命令 |
|------|------|
| 一键拉取并安装（默认密码） | `curl -sL https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh \| bash` |
| 指定密码执行 | `ROS_PASSWORD="你的密码" bash -c 'curl -sL https://raw.githubusercontent.com/qing48674431-cmd/qing-ros-images/main/v7.21.3%20install-ros-onekey.sh \| bash'` |
| 使用本地镜像 | `curl -sL ... \| bash -s /path/to/chr-7.21.3.img` |

更多说明见 [v7.21.3.md](v7.21.3.md)。
