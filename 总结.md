# qing-ros-images 仓库总结

本仓库提供 **RouterOS CHR 镜像** 与 **一键安装脚本**，并附带 MikroTikPatch 工具副本及 Container 相关说明。

---

## 一、仓库结构概览

| 类型     | 内容 |
|----------|------|
| **一键安装** | `v7.21.3 install-ros-onekey.sh`：从本仓库 Releases 下载 v7.21.3 镜像并 DD 安装，支持传入本地 .img 跳过下载 |
| **镜像来源** | [Releases](https://github.com/qing48674431-cmd/qing-ros-images/releases)：chr-7.21.3.img（UEFI）、chr-7.21.3-legacy-bios.img（Legacy BIOS） |
| **MikroTikPatch 副本** | `MikroTikPatch/`：elseif/MikroTikPatch 的文件副本，含 npk.py、chr.sh、prepare_container_npk.sh 等 |
| **文档** | 版本说明（v7.21.3.md、v7.20.6.md）、安全策略、Container 镜像制作说明、SOURCE 说明等 |

---

## 二、一键安装（推荐）

**脚本**：`v7.21.3 install-ros-onekey.sh`

- **从 Releases 下载并安装**（自动识别 UEFI/BIOS）：
  ```bash
  bash "v7.21.3 install-ros-onekey.sh"
  ```
- **使用本地已解压的镜像**（跳过下载）：
  ```bash
  bash "v7.21.3 install-ros-onekey.sh" /path/to/chr-7.21.3.img
  ```
- **自定义密码**：
  ```bash
  ROS_PASSWORD="你的密码" bash "v7.21.3 install-ros-onekey.sh"
  ```

脚本会注入：admin 密码、当前 IP/网关、SSH/Winbox 开启、`device-mode container=yes`。  
若需 WinBox 里出现 **Container**，首次启动后 5 分钟内需做一次 **冷关机再开机**（控制面板/宿主机断电再开）。

---

## 三、Container 相关

| 需求 | 做法 |
|------|------|
| **DD 后希望 WinBox 有 Container** | 使用本脚本注入的 `device-mode container=yes`，装好后做一次 **冷关机再开机**。 |
| **DD 完直接有 Container、无需冷重启** | 使用「已启用 Container」的模板镜像：见 [制作已启用Container的CHR镜像.md](制作已启用Container的CHR镜像.md)。 |
| **用 npk 做一遍 Container 包** | 运行 `MikroTikPatch/prepare_container_npk.sh`，从 MikroTikPatch Releases 拉取并解出 container.npk，见 [MikroTikPatch/SOURCE.md](MikroTikPatch/SOURCE.md)。 |

---

## 四、文档索引

| 文档 | 说明 |
|------|------|
| [v7.21.3.md](v7.21.3.md) | v7.21.3 镜像与安装说明（含脚本用法、更新摘要） |
| [v7.20.6.md](v7.20.6.md) | v7.20.6 版本说明 |
| [安全策略.md](安全策略.md) | 受支持版本、漏洞报告方式 |
| [制作已启用Container的CHR镜像.md](制作已启用Container的CHR镜像.md) | 如何制作「DD 后直接有 Container」的 .img，及 npk 加入镜像的说明 |
| [SOURCE.md](SOURCE.md) | 仓库/镜像来源说明（若存在） |
| [MikroTikPatch/SOURCE.md](MikroTikPatch/SOURCE.md) | MikroTikPatch 副本来源及 npk.py / prepare_container_npk 用法 |

---

## 五、版本与支持

当前脚本与发布维护版本见 [安全策略.md](安全策略.md)，主要包括：

- **v7.21.3**：支持（一键脚本与 Releases 对应）
- **v7.20.6**：支持
- 镜像与系统安全以 MikroTik / 上游 CHR 源为准。

---

## 六、常用链接

- **本仓库 Releases**：<https://github.com/qing48674431-cmd/qing-ros-images/releases>
- **v7.21.3 发布页**：<https://github.com/qing48674431-cmd/qing-ros-images/releases/tag/v7.21.3>
- **MikroTikPatch 上游**：<https://github.com/elseif/MikroTikPatch>
